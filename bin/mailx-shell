#!/bin/bash
# $1 "Body of Email"
# $2 "Subject of Email"
# $3 SENDTO
# $4 SENDER
if [ "$1" == "test" ]; then
	BODY="This is an mailx test"
	SUBJECT="Mailx Test"
elif [ -z "$1" ] || [ -z "$2" ]; then
	printf "Usage: $(basename $0) \"Body|test\" \"Subject\" [SendTo:+sysop] [Sender:+joe]\n"
	exit 1
else
	BODY="$1"
	SUBJECT="$2"
fi
SENDTO="$3"
SENDTO="${SENDTO:-sysop@bram.net}"
SENDER="$4"
SENDER="${SENDER:-joe@bram.net}"
	printf "${BODY}" | \
	/usr/local/bin/mailx \
	-r ${SENDER} \
	-s "${SUBJECT}" \
	-S smtp=smtp://box1242.bluehost.com:587 \
	-S smtp-use-starttls \
	-S smtp-auth=login \
	-S smtp-auth-user="joe@bram.net" \
	-S smtp-auth-password="char11346" \
	-S ssl-verify=ignore \
	${SENDTO}
#	printf "EMail sent From:${SENDER} To:${SENDTO}\n"
