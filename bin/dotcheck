#!/usr/local/bin/zsh
# dotcheck - copy file from ~/dotfiles/file to .file
# 	assumes the desired ${SrcFile} is in the ${SrcDir}
type emulate >/dev/null 2>/dev/null || alias emulate=true
emulate -L ksh
if [ -z ${1} ]; then
	echo "Usage: dotcheck [-f|-c] \"filename\" (without '.')" 
else
	case ${1:0:2} in
		-f) Force="Y"
				shift	;;
		-c) Check="Y"
				shift	;;
	esac
	SrcDir="${HOME}/dotfiles"
	DestDir=${HOME}
	cd ${SrcDir}
	for i in $@; do
		SrcFile="${i}"
		DestFile=".${i}"
		if [ ! -e ${SrcDir}/${SrcFile} ]; then
			echo "$(fg_red "Error:") ${SrcDir}/${SrcFile} does not exist."
		elif [ "${DestDir}/${DestFile}" -nt "${SrcDir}/${SrcFile}" ] && [ "${Force}" == "" ]; then
			echo "${DestDir}/${DestFile} is $(fg_red "NEWER") than ${SrcDir}/${SrcFile}"
		elif [ "${Check}" == "Y" ]; then
			printf "${SrcDir}/${SrcFile} $(fg_yellow "will be copied to") ${DestDir}/${DestFile}\n"
		else
			printf "Copy ${SrcDir}/${SrcFile} $(fg_green "to") ${DestDir}/${DestFile}\n"
		fi
	done
fi
